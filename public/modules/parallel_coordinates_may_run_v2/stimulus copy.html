<!DOCTYPE html>
<html>
<head>
  <title>Parallel Coordinates</title>
</head>

<body>
<div id= "par_coord_stimulus_timer"> </div>
<div id="wrapper" style="display:flex; flex-direction:row; justify-content: center;">
<div id="par_coord_stimulus"></div>
<div id="instructions">
	<p>
		This parallel coordinates plot presents a multivariate analysis of the classic Iris dataset. The dataset has four numerical variables,  
    shown as four distinct axes in the plot: sepal length, sepal width, petal length, and petal width.  

    A single polyline represents an individual data point across multiple variables. The values for a given data point are represented as the intersection of the polyline at each axis. 
    The polylines in this plot are color-coded by three iris species. The blue lines for Iris setosa, the magenta lines for Iris virginica, and the orange lines for Iris versicolor. 
	</p>
	<p>
    Parallel coordinates enable us to explore the relative differences and similarities among the three Iris species across the four variables in the dataset. 
In addition, the plot reveals relationships between the variables across all data points. For example, there is a noticeable negative relationship between Sepal Length and Sepal Width, as indicated by the intersecting "X" pattern of the lines. 
This pattern shows that when Sepal Length increases, Sepal Width generally decreases. In contrast, Petal Length and Petal Width demonstrate a positive relationship through the parallel arrangement of the lines, meaning that as one variable increases, the other tends to increase as well.
	</p>
</div>
</div>

<script> 
(function() {
  var data = {};
  var answers = {};

  init();
  
  function init(){

	data.par_coord_stimulus = null;

    //start timer
  experimentr.attachTimer('#par_coord_stimulus_timer', 120, function(){
    if(experimentr.get_current() == 'modules/parallel_coordinates_may_run_v2/stimulus.html'){ 
      experimentr.endTimer('par_coord_stimulus_timer');
      
      experimentr.addData(data);
      experimentr.next();
    }
  });
    // d3.select('.class-wrapper').node().innerHTML = experimentr.condition() === 1 ? `<div>TESTINGGGG</div>` : `<object data="modules/task_1_crait/crait_vis.svg" width="auto" height="460"> </object>`;
    if(experimentr.condition() === 1){
      // let vid = d3.select("#par_coord_stimulus").append('video');
      // vid.attr('controls', true);
      // vid.attr('width', 'auto');
      // vid.attr('height', '400px');
      // let source = vid.append('source');
      // source.attr('src', 'modules/parallel_coordinates_may_run_v2/parallel_coord_may_run.mp4');
      
      // let caption = vid.append('track')
      // caption.attr('src', 'modules/parallel_coordinates_may_run_v2/captions.vtt')
      // caption.attr('label', 'English')
      // caption.attr('kind', 'captions')
      // caption.attr('srclang', "en-us")
      // caption.attr('default', true)

      let vid = d3.select("#par_coord_stimulus").append('video')
      .attr('controls', true)
      .attr('width', 'auto')
      .attr('height', '400px')
      .attr('preload', 'auto');  // Ensures the browser seeks meta-data as soon as possible

    let source = vid.append('source')
      .attr('src', 'modules/parallel_coordinates_may_run_v2/output.mp4')
      .attr('type', 'video/mp4');  // Ensure the correct type is specified

    let caption = vid.append('track')
      .attr('src', 'modules/parallel_coordinates_may_run_v2/captions.vtt')
      .attr('label', 'English')
      .attr('kind', 'captions')
      .attr('srclang', "en-us")
      .attr('default', true);
      

      d3.select('#instructions').remove();

    }else{
   
      let ob = d3.select('#par_coord_stimulus').append('object');
      ob.attr('data', "modules/parallel_coordinates_may_run_v2/parallel_coord_new.svg"); 
      ob.attr('width', 'auto');
      ob.attr('height', '400px');

      d3.select('#wrapper').style('display', 'flex').style('flex-direction', 'row').style('align-items', 'center')

      d3.select("#instructions").style('padding-left', '20px');

    }

  	//overrides onNext from experimentr
    d3.select('#next-button')
      .on('click', function(){
		if(confirm("Are you sure you want to move on to the questions? \nYou won't be able to go back.")){
			console.log('PRESSED YES');
      experimentr.endTimer('par_coord_stimulus_timer');
      data.used_next = true;
			experimentr.addData(data);
      experimentr.next();   
		}
        // experimentr.addData(data);
        // experimentr.next();
    });
    
    experimentr.startTimer('par_coord_stimulus_timer');
    experimentr.release();
  }




}());
</script>
</body>
</html>
